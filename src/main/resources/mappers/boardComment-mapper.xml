<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="project.spring.guteam.BoardCommentMapper">

	 <insert id="insert">
	 	insert into ${board_comment}
	 	(${gameBoardId},${memberId},${commentContent})
	 	values (#{gameBoardId},#{memberId},#{commentContent})
	 </insert>
	 <select id="select_all_by_board_id" resultType="BoardCommentVO">
	 	select * from ${board_comment}
	 	where ${gameBoardId} = #{gameBoardId}
	 	order by ${commentId}
	 </select>
	 <update id="update">
	 	update ${board_comment}
	 	set ${commentContent} = #{commentContent}
	 	where ${commentId} = #{commentId}
	 </update>
	 <update id="delete">
	 	update ${board_comment}
	 	set ${commentContent} = '삭제된 댓글입니다.'
	 	where ${commentId} = #{commentId}
	 </update>
	 
	 <select id="select_and_paging" resultType="BoardCommentVO">
	 	select b.${commentId}, b.${gameBoardId}, b.${memberId}, b.${commentContent}, b.${replyCnt}, b.${commentDateCreated}
	 	from (
	 		select rownum rn, a.* from(
	 			select * from ${board_comment} where ${gameBoardId}=#{gameBoardId} order by ${commentId} desc
	 		)a
	 	)b where rn between #{start} and #{end} 
	 </select>
	 
	 <select id="total_count" resultType="Integer">
	 	select count(*) total_cnt from ${board_comment} where ${gameBoardId}=#{gameBoardId}
	 </select>
</mapper>